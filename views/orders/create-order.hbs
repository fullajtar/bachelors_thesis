<!--borders are set to top & right only, except edging elements
<input name="" id="" type="text" placeholder="" value="">
-->
<body class="flex justify-center">
<h1>Detail faktúry</h1>
<div class="a4 relative h-screen border-black border-4 text-sm font-sans">
    <form id="itemForm" action="/invoices/create" method="POST">

        <p class="pl-4">Faktúra číslo: {{this.id}}</p>
        <div class="grid grid-cols-2">
            <div class="bg-blue-100 border-black border-t-2 border-r-2 p-4">

                <h2>Dodávateľ</h2>
                <p>{{this.company.supplierName}}</p>
                <p>{{this.company.supplierResidence}}</p>
                <p>IČO: {{this.company.supplierIco}}</p>
                <p>DIČ: {{this.company.supplierDic}}</p>
                <p>Platiteľ DPH: {{this.company.supplierPayingTax}}</p>
                <p>IČDPH: {{this.company.supplierIcDph}}</p>
                <p>Register: {{this.company.supplierRegister}}</p>
                <a class="text-xs" href="/invoices/company/info">Zmeniť údaje</a><br>
                <label for="supplierSwift">ÚČET:</label><input name="supplierSwift" id="supplierSwift" type="text" placeholder="SWIFT" value="{{this.company.bankAccountNumber}}" required minlength="8" maxlength="11"><br>
                <label for="supplierBank">Banka:</label><input name="supplierBank" id="supplierBank" type="text" placeholder="Moja Banka, a.s." value="{{this.company.supplierBank}}" required><br>
                <label for="iban">IBAN:</label><input name="iban" id="iban" type="text" placeholder="IBAN" value="{{this.iban}}" required maxlength="32">
            </div>
            <div class="bg-green-100 border-black border-t-2 ">
                <div class="grid grid-cols-2" >
                    <div class="border-black border-r-2 pl-4">
                        <label for="paymentMethod">Forma úhrady:</label><input name="paymentMethod" id="paymentMethod" type="text" value="{{this.paymentMethod}}">
                        <!--
                        <select name="paymentMethod" id="paymentMethod" >
                            <option value="POSTOVA POUKAZKA">Poštová poukážka</option>
                            <option value="PREVOD">Bankový Prevod</option>
                            <option value="HOTOVOST">Hotovosť</option>
                            <option value="ZMENKA">Zmenka</option>
                        </select>--><br>
                        <label for="deliveryMethod">Spôsob Dopravy:</label><input name="deliveryMethod" id="deliveryMethod" type="text" placeholder="Spôsob Dopravy" value="{{this.deliveryMethod}}" required><br>
                        <label for="currency">Mena:</label><input name="currency" id="currency" type="text" placeholder="Mena" value="{{this.currency}}" required>
                    </div>
                    <div class="border-black  pl-4">
                        <label for="variableSymbol">Variabilný symbol:</label><input name="variableSymbol" id="variableSymbol" type="number" placeholder="Variabilný symbol" value="{{this.variableSymbol}}" required max="9999999999"><br><!--nepovinny -->
                        <label for="constantSymbol">Konštantný symbol:</label><input name="constantSymbol" id="constantSymbol" type="number" placeholder="Konštantný symbol" value="{{this.constantSymbol}}" required max="9999"><br><!--nepovinny -->
                        <label for="specificSymbol">Špecifický symbol:</label><input name="specificSymbol" id="specificSymbol" type="number" placeholder="Špecifický symbol" value="{{this.specificSymbol}}" required max="9999999999" > <!--nepovinny -->

                    </div>

                </div>
                <div class="p-4 border-t-2 border-black">
                    <h2 >Odberateľ</h2>
                    <label for="clientName"></label><input          name="clientName"       id="clientName"     type="text" placeholder="Môj klient, s.r.o." value="{{this.customer.clientName}}" required><br>
                    <label for="clientStreet"></label><input        name="clientStreet"     id="clientStreet"   type="text" placeholder="Ulica, súpisné číslo" value="{{this.customer.clientStreet}}" required><br>
                    <label for="clientPostCode"></label><input      name="clientPostCode"   id="clientPostCode" type="text" placeholder="PSČ" value="{{this.customer.clientPostCode}}" required><br>
                    <label for="clientTown"></label><input          name="clientTown"       id="clientTown"     type="text" placeholder="Mesto" value="{{this.customer.clientTown}}" required><br>
                    <label for="clientCountry"></label><input          name="clientCountry"       id="clientCountry"     type="text" placeholder="Krajina" value="{{this.customer.clientCountry}}" required><br>
                    <label for="clientIco">IČO:</label><input       name="clientIco"        id="clientIco"      type="number" placeholder="IČO" value="{{this.customer.clientIco}}" required max="99999999"><br>
                    <label for="clientDic">DIČ:</label><input       name="clientDic"        id="clientDic"      type="number" placeholder="DIČ" value="{{this.customer.clientDic}}" required max="9999999999"><br>
                    <label for="clientIcDph">IČDPH:</label><input   name="clientIcDph"      id="clientIcDph"    type="text" placeholder="IČDPH" value="{{this.customer.clientIcDph}}" required minlength="12" maxlength="12"><br>
                </div>

            </div>

        </div>





        <div class="grid grid-cols-3 bg-red-100 border-b-2 border-black"  id="payment">
            <label class="border-black border-t-2 border-r-2 pl-4" for="dateOfIssue">Dátum vystavenia:
                <input name="dateOfIssue"       id="dateOfIssue"    type="date"     placeholder="Dátum vystavenia"  value="{{dateParse this.dateOfIssue}}" required>
            </label>
            <label class="border-black border-t-2 border-r-2 pl-4" for="deliveryDate">Dátum dodania:
                <input name="deliveryDate"      id="deliveryDate"   type="date"     placeholder="Dátum dodania"     value="{{dateParse this.deliveryDate}}" required>
            </label>
            <label class="border-black border-t-2 pl-4" for="dueDate">Dátum splatnosti:
                <input name="dueDate"           id="dueDate"        type="date"     placeholder="Dátum splatnosti"  value="{{dateParse this.dueDate}}" required>
            </label>
        </div>


        <div class="bg-gray-300 flex justify-center mt-3 ml-3 mr-1">
            <table class="content-center table-auto text-xs" >
                <tbody id="table-of-contents">
                <tr>
                    <th class="font-normal border-2 border-black">P. č.</th>
                    <th class="font-normal border-2 border-black"><label for="quantity">Kód položky</label></th>

                    <th class="font-normal border-2 border-black"><label for="itemName">Názov položky</label></th>
                    <th class="font-normal border-2 border-black"><label for="quantity">Množstvo</label></th>
                    <th class="font-normal border-2 border-black"><label for="itemUnit">MJ</label></th>

                    <th class="font-normal border-2 border-black"><label for="itemPriceWithoutTax">Cena za j. bez DPH</label></th>
                    <th class="font-normal border-2 border-black"><label for="">Cena za j. s DPH</label></th>
                    <th class="font-normal border-2 border-black">Spolu bez DPH</th>
                    <th class="font-normal border-2 border-black"><label for="">DPH</label></th>
                    <th class="font-normal border-2 border-black"><label for="itemTax">DPH %</label></th>
                    <th class="font-normal border-2 border-black"><label for="discount">Zľava v %</label></th>

                    <th class="font-normal border-2 border-black"><label for="">Celková cena</label></th>
                </tr>

                {{#each this.invoiceItemLists}}
                    <tr id="row{{plus @index 1}}">
                        <!--0--><td class="border-2 border-black">{{plus @index 1}}</td>
                        <!--1--><td class="border-2 border-black"><input class="w-20" name="itemBarcode" id="itemBarcode" type="text" placeholder="Kód položky" value="{{item.itemBarcode}}" ></td>
                        <!--2--><td class="border-2 border-black"><input class="w-24" name="itemName" id="itemName" type="text" placeholder="" value="{{item.itemName}}" required></td>
                        <!--3--><td class="border-2 border-black"><input class="w-16" name="quantity" id="quantity" type="number"  placeholder="" value="{{quantity}}" min="0" required step="0.1" onchange="updateAll(this)"></td>
                        <!--4--><td class="border-2 border-black"><input class="w-10" name="itemUnit" id="itemUnit" type="text" placeholder="" value="{{item.itemUnit}}" required></td>
                        <!--5--><td class="border-2 border-black"><input class="w-20" name="itemPriceWithoutTax" id="itemPriceWithoutTax"  type="number"    value="{{item.itemPriceWithoutTax}}" min="0" required step="0.01" onchange="updateAll(this)"></td>
                        <!--6--><td class="border-2 border-black">{{singleItemWithTax this.item.itemTax item.itemPriceWithoutTax}}</td>
                        <!--7--><td class="border-2 border-black itemSum">{{multiply item.itemPriceWithoutTax quantity discount}}</td>
                        <!--8--><td class="border-2 border-black">{{absTax this.item.itemTax quantity item.itemPriceWithoutTax}}</td>
                        <!--9--><td class="border-2 border-black"><input class="w-14" name="itemTax" id="itemTax" type="number" placeholder=""  value="{{this.item.itemTax}}" required onchange="updateAll(this)"></td>
                        <!--10--><td class="border-2 border-black"><input class="w-16" name="discount" id="discount"        type="number"   value="{{discount}}" min="0" max="100" onchange="updateAll(this)"></td>

                        <!--11--><td class="border-2 border-black itemSumWithVatAndDiscount">{{totalWithVat this.item.itemTax quantity item.itemPriceWithoutTax}}</td>
                        <input name="itemNote" id="itemBarcode" type="hidden" placeholder="" value="-">
                        <input name="itemBody" id="itemBody" type="hidden" placeholder="" value="-">
                        <!--12--><td class="cursor-pointer" onclick="removeItem(this)" > X</td>
                    </tr>
                {{/each}}
                <tr>
                    <td class="border-2 border-black text-right" colspan="11">Spolu:</td>
                    <td id="totalSumPrice" class="border-2 border-black">{{priceWithTax this}}</td>
                </tr>
                </tbody>
            </table>

        </div>
        <button type="button" onclick="addItem()">Pridaj Položku</button>
        <div class="grid grid-cols-3 bg-yellow-100 absolute bottom-0 w-full">
            <div class="border-black border-t-2 border-r-2 pl-4">
                <p>Vyhotovil:  </p>
                <label for="degreeBeforeName"></label><input class="w-8" name="degreeBeforeName" id="degreeBeforeName" type="text" placeholder="Titul" value="{{this.issuedBy.degreeBeforeName}}" required>
                <label for="name"></label><input class="w-1/3" name="name" id="name" type="text" placeholder="Meno" value="{{this.issuedBy.name}}" required>
                <label for="surname"></label><input class="w-1/3" name="surname" id="surname" type="text" placeholder="Priezvisko" value="{{this.issuedBy.surname}}" required>
                <label for="degreeAfterName"></label><input class="w-8" name="degreeAfterName" id="degreeAfterName" type="text" placeholder="Titul" value="{{this.issuedBy.degreeAfterName}}" required><br>
                <label for="phoneNumber">Telefón:</label><input name="phoneNumber" id="phoneNumber" type="text" placeholder="Telefón" value="{{this.issuedBy.phoneNumber}}" required><br>
                <label for="email">Email:</label><input name="email" id="email" type="text" placeholder="email" value="{{this.issuedBy.email}}" required>
            </div>
            <div class="border-black border-t-2 border-r-2 pl-4">
                <p>Prevzal: </p>
                <label for="pickedUpByTitleBefore"></label><input class="w-8" name="pickedUpByTitleBefore" id="pickedUpByTitleBefore" type="text" placeholder="Titul" value="{{this.pickedUpByTitleBefore}}" required>
                <label for="pickedUpByName"></label><input class="w-1/3" name="pickedUpByName" id="pickedUpByName" type="text" placeholder="Meno" value="{{this.pickedUpByName}}" required>
                <label for="pickedUpBySurname"></label><input class="w-1/3" name="pickedUpBySurname" id="pickedUpBySurname" type="text" placeholder="Priezvisko" value="{{this.pickedUpBySurname}}" required>
                <label for="pickedUpByTitleAfter"></label><input class="w-8" name="pickedUpByTitleAfter" id="pickedUpByTitleAfter" type="text" placeholder="Titul" value="{{this.pickedUpByTitleAfter}}" required>

            </div>
            <div >
                <p class="border-black border-t-2 pl-4">Suma bez DPH: <text id="summaryWithoutVat">{{priceWithoutTax this}}</text> {{this.currency}}</p>
                <p  class="border-black border-t-2 border-b-2 pl-4">Celková fakturovaná suma: <text id="summaryWithVat">{{priceWithTax this}}</text> {{this.currency}}</p>
                <label class="pl-4" for="deposit">Uhradené zálohami: <input class="w-20" name="deposit" id="deposit" type="number" placeholder="Uhradené zálohami" value="{{this.deposit}}" min="0" step="0.01" onchange="updateSummary()" > {{this.currency}}</label>
                <p class="border-black border-t-2 h-16 pl-4"> K úhrade: <text id="summaryToPay">{{toPay this}}</text> {{this.currency}}</p>
            </div>

        </div>


        <input name="invoiceName" id="invoiceName" type="hidden" placeholder="" value="-">
        <input name="body" id="body" type="hidden" placeholder="" value="-">
        <input name="note" id="note" type="hidden" placeholder="" value="-">
        <input name="bankAccountNumber" id="bankAccountNumber" type="hidden" placeholder="Číslo účtu" value="-" required><br>
        <input name="clientBank" id="clientBank" type="hidden" placeholder="" value="-">
        <input name="clientSwift" id="clientSwift" type="hidden" placeholder="" value="-">
        <input name="clientRegister" id="clientRegister" type="hidden" placeholder="" value="-">
        <input name="clientPayingTax" id="clientPayingTax" type="hidden" placeholder="" value="-">

        <input type="submit">
    </form>


</div>

<script src="/script.js"></script>

<script>
    function removeItem(itemListId){
    }



    window.onload = () => {
        addItem();
    }
</script>